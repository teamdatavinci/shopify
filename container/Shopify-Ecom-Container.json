{
    "exportFormatVersion": 2,
    "exportTime": "2021-08-06 16:19:04",
    "containerVersion": {
        "path": "accounts/6002907335/containers/49597394/versions/0",
        "accountId": "6002907335",
        "containerId": "49597394",
        "containerVersionId": "0",
        "container": {
            "path": "accounts/6002907335/containers/49597394",
            "accountId": "6002907335",
            "containerId": "49597394",
            "name": "Test",
            "publicId": "GTM-K357Q42",
            "usageContext": [
                "WEB"
            ],
            "fingerprint": "1628266213353",
            "tagManagerUrl": "https://tagmanager.google.com/#/container/accounts/6002907335/containers/49597394/workspaces?apiLink=container"
        },
        "tag": [
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "21",
                "name": "GA4 - Configuration",
                "type": "gaawc",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendPageView",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableSendToServerContainer",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementId",
                        "value": "G-9JLMCMNZ50"
                    }
                ],
                "fingerprint": "1628266554940",
                "firingTriggerId": [
                    "2147479553"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "27",
                "name": "add_payment_info",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "add_payment_info"
                    },
                    {
                        "type": "LIST",
                        "key": "eventParameters",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "items"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Ecommerce Items}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "product_names_dt"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Product Names DataStudio}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TAG_REFERENCE",
                        "key": "measurementId",
                        "value": "GA4 - Configuration"
                    }
                ],
                "fingerprint": "1628266248077",
                "firingTriggerId": [
                    "26"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "35",
                "name": "GA4 Event - Product Detail View",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "view_item"
                    },
                    {
                        "type": "LIST",
                        "key": "eventParameters",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "product_view"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "1"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "items"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Ecommerce Items}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "product_names_dt"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Product Names DataStudio}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TAG_REFERENCE",
                        "key": "measurementId",
                        "value": "GA4 - Configuration"
                    }
                ],
                "fingerprint": "1628266248080",
                "firingTriggerId": [
                    "34"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "36",
                "name": "Ecom ID Set",
                "type": "html",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "html",
                        "value": "<script>\n  (function () {\n   window.localStorage.setItem(\"transId\",\"{{GA4 Ecom Transaction ID}}\");\n})();\n</script>"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "supportDocumentWrite",
                        "value": "false"
                    }
                ],
                "fingerprint": "1628266248198",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "71",
                "name": "GA4 - Add To Cart",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "add_to_cart"
                    },
                    {
                        "type": "LIST",
                        "key": "eventParameters",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "items"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Ecommerce Items}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "added_to_cart"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "1"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "product_names_dt"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Product Names DataStudio}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TAG_REFERENCE",
                        "key": "measurementId",
                        "value": "GA4 - Configuration"
                    }
                ],
                "fingerprint": "1628266248098",
                "firingTriggerId": [
                    "70"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "84",
                "name": "add_shipping_info",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "add_shipping_info"
                    },
                    {
                        "type": "LIST",
                        "key": "eventParameters",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "items"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Ecommerce Items}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "product_names_dt"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Product Names DataStudio}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TAG_REFERENCE",
                        "key": "measurementId",
                        "value": "GA4 - Configuration"
                    }
                ],
                "fingerprint": "1628266248104",
                "firingTriggerId": [
                    "83"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "97",
                "name": "begin_checkout",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "begin_checkout"
                    },
                    {
                        "type": "LIST",
                        "key": "eventParameters",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "items"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Ecommerce Items}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "product_names_dt"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Product Names DataStudio}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TAG_REFERENCE",
                        "key": "measurementId",
                        "value": "GA4 - Configuration"
                    }
                ],
                "fingerprint": "1628266248110",
                "firingTriggerId": [
                    "96"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "tagId": "105",
                "name": "GA4 Event - Purchase",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "purchase"
                    },
                    {
                        "type": "LIST",
                        "key": "eventParameters",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "items"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Ecommerce Items}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "value"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{GA4 ecom value}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "transaction_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{GA4 Ecom Transaction ID}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "currency"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "USD"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "product_names_dt"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Product Names DataStudio}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TAG_REFERENCE",
                        "key": "measurementId",
                        "value": "GA4 - Configuration"
                    }
                ],
                "fingerprint": "1628266248113",
                "firingTriggerId": [
                    "6"
                ],
                "teardownTag": [
                    {
                        "tagName": "Ecom ID Set",
                        "stopTeardownOnFailure": true
                    }
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            }
        ],
        "trigger": [
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "triggerId": "6",
                "name": "Purchase Custom Trigger",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "purchase"
                            }
                        ]
                    }
                ],
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{trans_truth}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "true"
                            },
                            {
                                "type": "BOOLEAN",
                                "key": "negate",
                                "value": "true"
                            }
                        ]
                    }
                ],
                "fingerprint": "1628266248064"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "triggerId": "26",
                "name": "add_payment_info",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "add_payment_info"
                            }
                        ]
                    }
                ],
                "fingerprint": "1628266248076"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "triggerId": "34",
                "name": "view_item",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "view_item"
                            }
                        ]
                    }
                ],
                "fingerprint": "1628266248079"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "triggerId": "70",
                "name": "Click - ADD TO CART",
                "type": "CLICK",
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Click Text}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "ADD TO CART"
                            }
                        ]
                    }
                ],
                "fingerprint": "1628266248098"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "triggerId": "82",
                "name": "Event - add_to_cart",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "add_to_cart"
                            }
                        ]
                    }
                ],
                "fingerprint": "1628266248103"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "triggerId": "83",
                "name": "Add Shipping Info",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "add_shipping_info"
                            }
                        ]
                    }
                ],
                "fingerprint": "1628266248104"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "triggerId": "96",
                "name": "Begin Checkout",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "begin_checkout"
                            }
                        ]
                    }
                ],
                "fingerprint": "1628266248109"
            }
        ],
        "variable": [
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "3",
                "name": "GA4 Ecom Transaction ID",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.transactionId"
                    }
                ],
                "fingerprint": "1628266248063",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "4",
                "name": "transaction_id",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function(){\n\nreturn window.localStorage.getItem(\"transId\");\n\n}"
                    }
                ],
                "fingerprint": "1628266248115",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "5",
                "name": "trans_truth",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function(){\n\nvar a;\n  if({{transaction_id}}){\nif({{transaction_id}}=={{GA4 Ecom Transaction ID}}){a=\"true\"}\n}\nreturn a;\n\n}"
                    }
                ],
                "fingerprint": "1628266248115",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "24",
                "name": "Ecommerce Items",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.items"
                    }
                ],
                "fingerprint": "1628266248076",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "25",
                "name": "Product Names DataStudio",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function(){\nvar items = {{Ecommerce Items}};\nvar final_items = [];\nfor(var k = 0;k<items.length;k++){\n    final_items.push(items[k].item_name)\n    }\nfinal_items = final_items.join(\"  ;  \")\n\nreturn final_items\n\n}"
                    }
                ],
                "fingerprint": "1628266248196",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "29",
                "name": "Custom Referrer",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function(){\nreturn document.referrer\n}"
                    }
                ],
                "fingerprint": "1628266248196",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "30",
                "name": "Full Page URL",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function(){\nreturn window.location.href\n}"
                    }
                ],
                "fingerprint": "1628266248197",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "31",
                "name": "Google Analytics",
                "type": "gas",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "cookieDomain",
                        "value": "auto"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "doubleClick",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setTrackerName",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "useDebugVersion",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "useHashAutoLink",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "decorateFormsAutoLink",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableLinkId",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "dimension",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "index",
                                        "value": "2"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "dimension",
                                        "value": "{{Custom Referrer}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "index",
                                        "value": "3"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "dimension",
                                        "value": "{{Full Page URL}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEcommerce",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "trackingId",
                        "value": "UA-115070274-1"
                    }
                ],
                "fingerprint": "1628266248078"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "72",
                "name": "DataLayer Products Item Array",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "products"
                    }
                ],
                "fingerprint": "1628266248099",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "90",
                "name": "GA4 Items",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function(){\n\n    var item_array = {{DataLayer Products Item Array}}\n    var final_array = []\n    var total_price = 0;\n    for(var i=0;i<item_array.length;i++){\n    var price = item_array[i].price;\n    total_price+=price;\n    var item_name = item_array[i].name;\n    var item_id = item_array[i].id;\n    var quantity = item_array[i].quantity;\n    if(item_name.indexOf(\"BionicGym\")!=-1 && (item_name.indexOf(\"Standard\")!=-1  || item_name.indexOf(\"HIIT\")!=-1)){\n\n    var variant = text.replace(\"BionicGym - \",\"\");\n    item_name = \"BionicGym\";\n    \n    }\n     if(item_name.indexOf(\"Bionic Wraps\")!=-1){\n\n    var variant = text.replace(\"Bionic Wraps - \",\"\");\n    item_name = \"Bionic Wraps\";\n    \n    }\n    var tempx = {\n        'item_name': item_name,\n        'item_id': item_id,\n        'price': price,\n        'quantity': quantity,\n        'item_category': variant,\n        'item_variant': variant\n      }\n    final_array.push(tempx);\n    }\nreturn final_array\n\n\n\n\n\n\n\n}"
                    }
                ],
                "fingerprint": "1628266248202",
                "formatValue": {}
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "variableId": "93",
                "name": "GA4 ecom value",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.value"
                    }
                ],
                "fingerprint": "1628266248108",
                "formatValue": {}
            }
        ],
        "builtInVariable": [
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "PAGE_URL",
                "name": "Page URL"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "PAGE_HOSTNAME",
                "name": "Page Hostname"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "PAGE_PATH",
                "name": "Page Path"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "REFERRER",
                "name": "Referrer"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "EVENT",
                "name": "Event"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "CLICK_ELEMENT",
                "name": "Click Element"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "CLICK_CLASSES",
                "name": "Click Classes"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "CLICK_ID",
                "name": "Click ID"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "CLICK_URL",
                "name": "Click URL"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "CLICK_TEXT",
                "name": "Click Text"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "NEW_HISTORY_FRAGMENT",
                "name": "New History Fragment"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "OLD_HISTORY_FRAGMENT",
                "name": "Old History Fragment"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "NEW_HISTORY_STATE",
                "name": "New History State"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "OLD_HISTORY_STATE",
                "name": "Old History State"
            },
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "type": "HISTORY_SOURCE",
                "name": "History Source"
            }
        ],
        "fingerprint": "1628266744903",
        "tagManagerUrl": "https://tagmanager.google.com/#/versions/accounts/6002907335/containers/49597394/versions/0?apiLink=version",
        "customTemplate": [
            {
                "accountId": "6002907335",
                "containerId": "49597394",
                "templateId": "17",
                "name": "EEC dataLayer Builder for GA4",
                "fingerprint": "1628266248071",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"MACRO\",\n  \"id\": \"cvt_temp_public_id\",\n  \"version\": 1,\n  \"securityGroups\": [],\n  \"displayName\": \"EEC dataLayer Builder for GA4\",\n  \"categories\": [\n    \"ANALYTICS\",\n    \"UTILITY\",\n    \"TAG_MANAGEMENT\"\n  ],\n  \"description\": \"This original template converts existing Enhanced E-commerce events from the “old” version of Google Analytics (Universal Analytics) to the new Google Analytics 4 E-commerce events\",\n  \"containerContexts\": [\n    \"WEB\"\n  ],\n  \"brand\": {\n    \"displayName\": \"matteo-zambon-gtm\",\n    \"id\": \"github.com_matteo-zambon-gtm\"\n  }\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"SELECT\",\n    \"name\": \"selectReturnValue\",\n    \"displayName\": \"Mode\",\n    \"macrosInSelect\": false,\n    \"selectItems\": [\n      {\n        \"value\": \"event_name\",\n        \"displayValue\": \"Event Name\"\n      },\n      {\n        \"value\": \"items\",\n        \"displayValue\": \"Items\"\n      }\n    ],\n    \"simpleValueType\": true,\n    \"defaultValue\": \"event_name\",\n    \"alwaysInSummary\": true,\n    \"help\": \"Select the variable mode\"\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"checkoutEvents\",\n    \"displayName\": \"Checkout Events\",\n    \"groupStyle\": \"ZIPPY_OPEN\",\n    \"subParams\": [\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"beginCheckoutStep\",\n        \"displayName\": \"begin_checkout\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 1,\n        \"canBeEmptyString\": true,\n        \"help\": \"Enter the checkout step for the event \\u003cb\\u003ebegin_checkout\\u003c/b\\u003e. \\u003cbr\\u003eDefault 1\",\n        \"valueValidators\": [\n          {\n            \"type\": \"REGEX\",\n            \"args\": [\n              \"(^[0-9]+$|^$)\"\n            ]\n          }\n        ],\n        \"valueHint\": \"\",\n        \"notSetText\": \"\",\n        \"alwaysInSummary\": true\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"addShippingInfoStep\",\n        \"displayName\": \"add_shipping_info\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 2,\n        \"canBeEmptyString\": true,\n        \"help\": \"Enter the checkout step for the event \\u003cb\\u003eadd_shipping_info\\u003c/b\\u003e. \\u003cbr\\u003eDefault 2\",\n        \"valueValidators\": [\n          {\n            \"type\": \"REGEX\",\n            \"args\": [\n              \"(^[0-9]+$|^$)\"\n            ]\n          }\n        ],\n        \"valueHint\": \"\",\n        \"notSetText\": \"\",\n        \"alwaysInSummary\": true\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"addPaymentInfoStep\",\n        \"displayName\": \"add_payment_info\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 3,\n        \"canBeEmptyString\": true,\n        \"help\": \"Enter the checkout step for the event \\u003cb\\u003eadd_payment_info\\u003c/b\\u003e. \\u003cbr\\u003eDefault 3\",\n        \"valueValidators\": [\n          {\n            \"type\": \"REGEX\",\n            \"args\": [\n              \"(^[0-9]+$|^$)\"\n            ]\n          }\n        ],\n        \"valueHint\": \"\",\n        \"notSetText\": \"\",\n        \"alwaysInSummary\": true\n      },\n      {\n        \"type\": \"GROUP\",\n        \"name\": \"groupViewCart\",\n        \"displayName\": \"View Cart Event\",\n        \"groupStyle\": \"NO_ZIPPY\",\n        \"subParams\": [\n          {\n            \"type\": \"CHECKBOX\",\n            \"name\": \"tickViewCart\",\n            \"checkboxText\": \"Track view_cart\",\n            \"simpleValueType\": true\n          },\n          {\n            \"type\": \"TEXT\",\n            \"name\": \"viewCartStep\",\n            \"displayName\": \"view_cart\",\n            \"simpleValueType\": true,\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"tickViewCart\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ],\n            \"canBeEmptyString\": true,\n            \"valueValidators\": [\n              {\n                \"type\": \"POSITIVE_NUMBER\"\n              }\n            ],\n            \"help\": \"Enter the checkout step for the event \\u003cb\\u003eview_cart\\u003c/b\\u003e. \\u003cbr\\u003eDefault disabled\",\n            \"notSetText\": \"\",\n            \"alwaysInSummary\": false\n          }\n        ]\n      }\n    ],\n    \"help\": \"Define the checkout step numbers for the GA4 event \\u003cb\\u003eview_cart\\u003c/b\\u003e, \\u003cb\\u003ebegin_checkout\\u003c/b\\u003e, \\u003cb\\u003eadd_shipping_info\\u003c/b\\u003e and \\u003cb\\u003eadd_payment_info\\u003c/b\\u003e.\",\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"selectReturnValue\",\n        \"paramValue\": \"event_name\",\n        \"type\": \"EQUALS\"\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"defaultCurrency\",\n    \"displayName\": \"Default Currency value\",\n    \"groupStyle\": \"ZIPPY_OPEN\",\n    \"subParams\": [\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"defaultCurrencyValue\",\n        \"displayName\": \"Default Currency\",\n        \"simpleValueType\": true,\n        \"help\": \"Enter the default value to use for the Currency parameter, if it\\u0027s not found in the dataLayer \\\"ecommerce.currencyCode\\\" path\"\n      }\n    ],\n    \"help\": \"Enter the default value to use for the Currency parameter, if it\\u0027s not found in the dataLayer\",\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"selectReturnValue\",\n        \"paramValue\": \"items\",\n        \"type\": \"EQUALS\"\n      }\n    ]\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst makeTableMap = require('makeTableMap');\nconst Math = require('Math');\nconst queryPermission = require('queryPermission');\nconst copyFromWindow = require('copyFromWindow');\nconst logToConsole = require('logToConsole');\nconst copyFromDataLayer = require('copyFromDataLayer');\nconst setInWindow = require('setInWindow');\nconst merge = function() {\n  const obj = {},\n        il = arguments.length;\n  let a = 0,\n      key;\n  for (; a < il; a++) {\n    for (key in arguments[a]) {\n      if (arguments[a].hasOwnProperty(key)) {\n        obj[key] = arguments[a][key];\n      }\n    }\n  }\n  return obj;\n};\nconst parseDimensionsMetrics = function(obj, item) {\n  for (var cd in obj) {\n    if (obj.hasOwnProperty(cd)) {\n      if (cd.match(\"^dimension[0-9]+\")) {\n        item[cd] = obj[cd];\n      }\n    }\n  }\n  for (var cm in obj) {\n    if (obj.hasOwnProperty(cm)) {\n      if (cm.match(\"^metric[0-9]+\")) {\n        item[cm] = obj[cm];\n      }\n    }\n  }\n  return item;\n};\nconst round = function(price){\n  return Math.round(price * 100) / 100;\n};\n\nlet dLayer = copyFromDataLayer('ecommerce', 1), \n    ecommerce, \n    i, \n    currencyValue,\n    returnMode = data.selectReturnValue,\n    view_cart_step = data.viewCartStep,\n    begin_checkout_step = data.beginCheckoutStep,\n    add_shipping_info_step = data.addShippingInfoStep,\n    add_payment_info_step = data.addPaymentInfoStep,\n    default_currency_value = data.defaultCurrencyValue,\n    eventName = '',\n    items = [];\n\necommerce = dLayer;\nif(ecommerce === undefined){\n  return '';\n}\n\nif(ecommerce.hasOwnProperty('currencyCode')){\n  currencyValue = ecommerce.currencyCode;\n}\nelse{\n  currencyValue = default_currency_value;\n}\n\nif(returnMode == 'items'){\n  if(ecommerce.hasOwnProperty('items')){\n    return ecommerce.items;\n  }\n  else if(ecommerce.hasOwnProperty('purchase') && ecommerce.purchase.hasOwnProperty('items')){\n    return ecommerce.purchase.items;\n  } \n}\nelse if(returnMode == 'event_name'){\n  if(ecommerce.hasOwnProperty('items') || (ecommerce.hasOwnProperty('purchase') && ecommerce.purchase.hasOwnProperty('items'))){\n    return copyFromDataLayer('event', 2);\n  }\n}\n\nif (ecommerce.impressions) {\n  eventName = 'view_item_list';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.impressions.length; i++) {\n      let product = ecommerce.impressions[i];\n      let item = {\n        'item_name': product.hasOwnProperty('name') ? product.name : undefined,\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'price': round(product.hasOwnProperty('price') ? product.price : 0),\n        'item_brand': product.hasOwnProperty('brand') ? product.brand : undefined,\n        'item_category': product.hasOwnProperty('category') ? product.category.split('/')[0] : undefined,\n        'item_category2': product.hasOwnProperty('category') ? product.category.split('/')[1] : undefined,\n        'item_category3': product.hasOwnProperty('category') ? product.category.split('/')[2] : undefined,\n        'item_category4': product.hasOwnProperty('category') ? product.category.split('/')[3] : undefined,\n        'item_variant': product.hasOwnProperty('variant') ? product.variant : undefined,\n        'item_list_name': product.hasOwnProperty('list') ? product.list : undefined,\n        'item_list_id': '',\n        'index': product.hasOwnProperty('position') ? product.position : undefined,\n        'quantity': '1',\n        'currency': currencyValue\n      };\n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }\n  }\n}\nif (ecommerce.click) {\n  eventName = 'select_item';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.click.products.length; i++) {\n      let product = ecommerce.click.products[i];\n      let item = {\n        'item_name': product.hasOwnProperty('name') ? product.name : undefined,\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'price': round(product.hasOwnProperty('price') ? product.price : 0),\n        'item_brand': product.hasOwnProperty('brand') ? product.brand : undefined,\n        'item_category': product.hasOwnProperty('category') ? product.category.split('/')[0] : undefined,\n        'item_category2': product.hasOwnProperty('category') ? product.category.split('/')[1] : undefined,\n        'item_category3': product.hasOwnProperty('category') ? product.category.split('/')[2] : undefined,\n        'item_category4': product.hasOwnProperty('category') ? product.category.split('/')[3] : undefined,\n        'item_variant': product.hasOwnProperty('variant') ? product.variant : undefined,\n        'item_list_name': product.hasOwnProperty('list') ? product.list : undefined,\n        'item_list_id': ecommerce.click.hasOwnProperty('actionField') && ecommerce.click.actionField.hasOwnProperty('list') ? ecommerce.click.actionField.list : '',\n        'index': product.hasOwnProperty('position') ? product.position : undefined,\n        'quantity': '1',\n        'currency': currencyValue\n      };\n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }\n  }\n}\nif (ecommerce.detail) {\n  eventName = 'view_item';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.detail.products.length; i++) {\n      let product = ecommerce.detail.products[i];\n      let item = {\n        'item_name': product.hasOwnProperty('name') ? product.name : undefined,\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'price': round(product.hasOwnProperty('price') ? product.price : 0),\n        'item_brand': product.hasOwnProperty('brand') ? product.brand : undefined,\n        'item_category': product.hasOwnProperty('category') ? product.category.split('/')[0] : undefined,\n        'item_category2': product.hasOwnProperty('category') ? product.category.split('/')[1] : undefined,\n        'item_category3': product.hasOwnProperty('category') ? product.category.split('/')[2] : undefined,\n        'item_category4': product.hasOwnProperty('category') ? product.category.split('/')[3] : undefined,\n        'item_variant': product.hasOwnProperty('variant') ? product.variant : undefined,\n        'item_list_name': product.hasOwnProperty('list') ? product.list : undefined,\n        'item_list_id': '',\n        'index': product.hasOwnProperty('position') ? product.position : undefined,\n        'quantity': '1',\n        'currency': currencyValue\n      }; \n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }\n  }\n}\nif (ecommerce.add) {\n  eventName = 'add_to_cart';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.add.products.length; i++) {\n      let product = ecommerce.add.products[i];\n      let item = {\n        'item_name': product.hasOwnProperty('name') ? product.name : undefined,\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'price': round(product.hasOwnProperty('price') ? product.price : 0),\n        'item_brand': product.hasOwnProperty('brand') ? product.brand : undefined,\n        'item_category': product.hasOwnProperty('category') ? product.category.split('/')[0] : undefined,\n        'item_category2': product.hasOwnProperty('category') ? product.category.split('/')[1] : undefined,\n        'item_category3': product.hasOwnProperty('category') ? product.category.split('/')[2] : undefined,\n        'item_category4': product.hasOwnProperty('category') ? product.category.split('/')[3] : undefined,\n        'item_variant': product.hasOwnProperty('variant') ? product.variant : undefined,\n        'item_list_name': product.hasOwnProperty('list') ? product.list : undefined,\n        'item_list_id': '',\n        'index': product.hasOwnProperty('position') ? product.position : undefined,\n        'quantity': product.hasOwnProperty('quantity') ? product.quantity : 1,\n        'currency': currencyValue\n      };\n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }  \n  }\n}\nif (ecommerce.remove) {\n  eventName = 'remove_from_cart';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.remove.products.length; i++) {\n      let product = ecommerce.remove.products[i];\n      let item = {\n        'item_name': product.hasOwnProperty('name') ? product.name : undefined,\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'price': round(product.hasOwnProperty('price') ? product.price : 0),\n        'item_brand': product.hasOwnProperty('brand') ? product.brand : undefined,\n        'item_category': product.hasOwnProperty('category') ? product.category.split('/')[0] : undefined,\n        'item_category2': product.hasOwnProperty('category') ? product.category.split('/')[1] : undefined,\n        'item_category3': product.hasOwnProperty('category') ? product.category.split('/')[2] : undefined,\n        'item_category4': product.hasOwnProperty('category') ? product.category.split('/')[3] : undefined,\n        'item_variant': product.hasOwnProperty('variant') ? product.variant : undefined,\n        'item_list_name': product.hasOwnProperty('list') ? product.list : undefined,\n        'item_list_id': '',\n        'index': product.hasOwnProperty('position') ? product.position : undefined,\n        'quantity': product.hasOwnProperty('quantity') ? product.quantity : 1,\n        'currency': currencyValue\n      };\n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }  \n  }\n} \nif (ecommerce.checkout) { \n  if(returnMode == 'event_name'){\n    let currentStep = ecommerce.checkout.actionField.step;\n    if(data.tickViewCart && view_cart_step == currentStep){\n  \t  eventName = 'view_cart';\n    }\n    else if((begin_checkout_step === '' && currentStep == 1) || begin_checkout_step == currentStep){\n\t  eventName = 'begin_checkout';\n    }\n    else if((add_shipping_info_step === '' && currentStep == 2) || add_shipping_info_step == currentStep){\n      eventName = 'add_shipping_info';\n    }\n    else if((add_payment_info_step === '' && currentStep == 3) || add_payment_info_step == currentStep){\n      eventName = 'add_payment_info';\n    }\n  }\n  else{\n    eventName = '';\n  }\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.checkout.products.length; i++) {\n      let product = ecommerce.checkout.products[i];\n      let item = {\n        'item_name': product.hasOwnProperty('name') ? product.name : undefined,\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'price': round(product.hasOwnProperty('price') ? product.price : 0),\n        'item_brand': product.hasOwnProperty('brand') ? product.brand : undefined,\n        'item_category': product.hasOwnProperty('category') ? product.category.split('/')[0] : undefined,\n        'item_category2': product.hasOwnProperty('category') ? product.category.split('/')[1] : undefined,\n        'item_category3': product.hasOwnProperty('category') ? product.category.split('/')[2] : undefined,\n        'item_category4': product.hasOwnProperty('category') ? product.category.split('/')[3] : undefined,\n        'item_variant': product.hasOwnProperty('variant') ? product.variant : undefined,\n        'item_list_name': '',\n        'item_list_id': '',\n        'index': product.hasOwnProperty('position') ? product.position : undefined,\n        'quantity': product.hasOwnProperty('quantity') ? product.quantity : 1,\n        'currency': currencyValue\n      };\n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }\n  }\n}\nif (ecommerce.purchase) {\n  eventName = 'purchase';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.purchase.products.length; i++) {\n      let product = ecommerce.purchase.products[i];\n      let item = {\n        'item_name': product.hasOwnProperty('name') ? product.name : undefined,\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'price': round(product.hasOwnProperty('price') ? product.price : 0),\n        'item_brand': product.hasOwnProperty('brand') ? product.brand : undefined,\n        'item_category': product.hasOwnProperty('category') ? product.category.split('/')[0] : undefined,\n        'item_category2': product.hasOwnProperty('category') ? product.category.split('/')[1] : undefined,\n        'item_category3': product.hasOwnProperty('category') ? product.category.split('/')[2] : undefined,\n        'item_category4': product.hasOwnProperty('category') ? product.category.split('/')[3] : undefined,\n        'item_variant': product.hasOwnProperty('variant') ? product.variant : undefined,\n        'item_list_name': '',\n        'item_list_id': '',\n        'index': product.hasOwnProperty('position') ? product.position : undefined,\n        'quantity': product.hasOwnProperty('quantity') ? product.quantity : 1,\n        'currency': currencyValue\n      };\n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }  \n  }\n}\nif (ecommerce.refund) {\n  eventName = 'refund';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.refund.products.length; i++) {\n      let product = ecommerce.refund.products[i];\n      let item = {\n        'item_id': product.hasOwnProperty('id') ? product.id : undefined,\n        'quantity': product.hasOwnProperty('quantity') ? product.quantity : 1,\n        'currency': currencyValue\n      };\n      item = parseDimensionsMetrics(product, item);\n      items.push(item);\n    }  \n  }\n}\nif (ecommerce.promoView) {\n  eventName = 'view_promotion';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.promoView.promotions.length; i++) {\n      let promo = ecommerce.promoView.promotions[i];\n      let item = {\n        'promotion_name': promo.hasOwnProperty('name') ? promo.name : undefined,\n        'promotion_id': promo.id,\n        'creative_name': promo.hasOwnProperty('creative') ? promo.creative : undefined,\n        'creative_slot': promo.hasOwnProperty('position') ? promo.position : undefined,\n      };      \n      item = parseDimensionsMetrics(promo, item);\n      items.push(item);\n    }  \n  }\n}\nif (ecommerce.promoClick) {\n  eventName = 'select_promotion';\n  if(returnMode == 'items'){\n    for (i = 0; i < ecommerce.promoClick.promotions.length; i++) {\n      let promo = ecommerce.promoClick.promotions[i];\n      let item = {\n        'promotion_name': promo.hasOwnProperty('name') ? promo.name : undefined,\n        'promotion_id': promo.id,\n        'creative_name': promo.hasOwnProperty('creative') ? promo.creative : undefined,\n        'creative_slot': promo.hasOwnProperty('position') ? promo.position : undefined,\n      };\n      item = parseDimensionsMetrics(promo, item);\n      items.push(item);\n    }  \n  }\n}\n\nif(returnMode == 'items'){\n  return items;\n}\nelse if(returnMode == 'event_name'){\n  if(eventName === undefined || eventName === ''){\n    return '';\n  }\n  return eventName;\n}\nelse{\n  return undefined;\n}\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"ecommerceVariable\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"logging\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"environments\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"debug\"\n          }\n        }\n      ]\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_data_layer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keyPatterns\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"ecommerce.*\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"event\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios: []\nsetup: ''\n\n\n___NOTES___\n\nCreated on 11/3/2020, 6:03:12 PM\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "matteo-zambon-gtm",
                    "repository": "EEC-dataLayer-Builder-for-GA4",
                    "version": "8337502cd0b0c39c635a0597e7d5af43412c643a",
                    "signature": "1a9f7c4ef36f8f1fbbf45fa516ad95deaf18cfd07f8a03e2041f2e813b27ba3e"
                }
            }
        ]
    }
}